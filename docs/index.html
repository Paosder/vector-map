<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@paosder/vector-map</title>
	<meta name="description" content="Documentation for @paosder/vector-map">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@paosder/vector-map</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>@paosder/vector-map</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#vectormap----" id="vectormap----" style="color: inherit; text-decoration: none;">
					<h1>VectorMap <a href="https://travis-ci.com/Paosder/vector-map"><img src="https://travis-ci.com/Paosder/vector-map.svg?branch=master" alt="Build Status"></a>  <a href="https://codecov.io/gh/Paosder/vector-map"><img src="https://codecov.io/gh/Paosder/vector-map/branch/master/graph/badge.svg?token=aBRZ07TSBg" alt="codecov"></a> <a href="https://badge.fury.io/js/%40paosder%2Fvector-map"><img src="https://badge.fury.io/js/%40paosder%2Fvector-map.svg" alt="npm version"></a></h1>
				</a>
				<p><a href="https://npmjs.org/package/@paosder/vector-map"><img src="https://nodei.co/npm/@paosder/vector-map.png" alt="NPM"></a></p>
				<p>Vector like object using map with array.</p>
				<a href="#why" id="why" style="color: inherit; text-decoration: none;">
					<h1>Why?</h1>
				</a>
				<p>In ES6, Map is very useful key-value collection object.
					It is very efficient to access value via specific key and easy to delete too.
					However, sometimes we need to change item order for use like array or iterable.
					ES6 map cannot swap or change its order before transform to array(ex. <code>map.entries().forEach(..)</code>).
					One way to solve this, transform map to array, change its order, then re-transform into map.
					It seems really fair and simple approach, but then real big problem comes: changing its order.
					We cannot easily find where our item is in array, so we must traverse all items to find where it is and it consumes time complexity O(n).
					Well, if all items were sorted, we can reduce its time complexity to O(logn). However we cannot determine the original map was sorted, and
					we don&#39;t want to sort transformed array for just doing swap its order. It&#39;s &quot;redundant&quot; and &quot;inefficient&quot;.
				VectorMap resolves such, especially swap case. VectorMap is concatenated map(pointer)-array(source) object. Map contains source pointer(array index), and array contains its value and key. We can access or delete value with time complexity O(1) via map-array. Though delete operation is actually swap with tail and pop so that causes cracking its original order, it has great performance O(1) and its really great to use with webGL instancing.</p>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h1>Usage</h1>
				</a>
				<pre><code class="language-ts"><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #267F99">FooBar</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">;</span>
<span style="color: #000000">  </span><span style="color: #001080">bar</span><span style="color: #000000">: </span><span style="color: #267F99">number</span><span style="color: #000000">;</span>
<span style="color: #000000">}</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">vectorMap</span><span style="color: #000000">: </span><span style="color: #267F99">VectorMap</span><span style="color: #000000">&lt;</span><span style="color: #267F99">string</span><span style="color: #000000">, </span><span style="color: #267F99">FooBar</span><span style="color: #000000">&gt; = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">VectorMap</span><span style="color: #000000">();</span>

<span style="color: #008000">// set item.</span>
<span style="color: #001080">vectorMap</span><span style="color: #000000">.</span><span style="color: #795E26">set</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;foo&#039;</span><span style="color: #000000">, {</span>
<span style="color: #000000">  </span><span style="color: #001080">foo:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;foo&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">bar:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">,</span>
<span style="color: #000000">});</span>
<span style="color: #001080">vectorMap</span><span style="color: #000000">.</span><span style="color: #795E26">set</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;bar&#039;</span><span style="color: #000000">, {</span>
<span style="color: #000000">  </span><span style="color: #001080">foo:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;bar&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">bar:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">,</span>
<span style="color: #000000">});</span>

<span style="color: #008000">// get item.</span>
<span style="color: #001080">vectorMap</span><span style="color: #000000">.</span><span style="color: #795E26">get</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;foo&#039;</span><span style="color: #000000">);</span>

<span style="color: #008000">// swap inner order. It does not affect to each item.</span>
<span style="color: #001080">vectorMap</span><span style="color: #000000">.</span><span style="color: #795E26">swapSource</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;foo&#039;</span><span style="color: #000000">,</span><span style="color: #A31515">&#039;bar&#039;</span><span style="color: #000000">);</span>

<span style="color: #008000">// vectorMap is iterable.</span>
<span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">v</span><span style="color: #000000"> </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #001080">vectorMap</span><span style="color: #000000">) {</span>
<span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">v</span><span style="color: #000000">.</span><span style="color: #001080">key</span><span style="color: #000000">, </span><span style="color: #001080">v</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #008000">// you can iterate item via forEach, map, reduce too.</span>
<span style="color: #001080">vectorMap</span><span style="color: #000000">.</span><span style="color: #795E26">forEach</span><span style="color: #000000">((</span><span style="color: #001080">el</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">el</span><span style="color: #000000">);</span>
<span style="color: #000000">});</span>

<span style="color: #008000">// delete item. It swaps with tail element then pop. This will change its order.</span>
<span style="color: #001080">vectorMap</span><span style="color: #000000">.</span><span style="color: #795E26">delete</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;foo&#039;</span><span style="color: #000000">);</span>

<span style="color: #008000">// you can serve swap callback if deleting item is swapped with tail. Only called when swapped.</span>
<span style="color: #001080">vectorMap</span><span style="color: #000000">.</span><span style="color: #795E26">delete</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;bar&#039;</span><span style="color: #000000">, (</span><span style="color: #001080">swapped</span><span style="color: #000000">, </span><span style="color: #001080">deleted</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">swapped</span><span style="color: #000000">.</span><span style="color: #001080">key</span><span style="color: #000000">, </span><span style="color: #001080">swapped</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">);</span>
<span style="color: #000000">});</span>
</code></pre>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/vectormap.html" class="tsd-kind-icon">Vector<wbr>Map</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#mapsource" class="tsd-kind-icon">Map<wbr>Source</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>