<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>@paosder/vector-map</title><meta name="description" content="Documentation for @paosder/vector-map"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@paosder/vector-map</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@paosder/vector-map</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#vectormap----" id="vectormap----" style="color: inherit; text-decoration: none;">
  <h1>VectorMap <a href="https://travis-ci.com/Paosder/vector-map"><img src="https://travis-ci.com/Paosder/vector-map.svg?branch=master" alt="Build Status"></a>  <a href="https://codecov.io/gh/Paosder/vector-map"><img src="https://codecov.io/gh/Paosder/vector-map/branch/master/graph/badge.svg?token=aBRZ07TSBg" alt="codecov"></a> <a href="https://badge.fury.io/js/%40paosder%2Fvector-map"><img src="https://badge.fury.io/js/%40paosder%2Fvector-map.svg" alt="npm version"></a></h1>
</a>
<p><a href="https://npmjs.org/package/@paosder/vector-map"><img src="https://nodei.co/npm/@paosder/vector-map.png" alt="NPM"></a></p>
<p>Vector like object using map with array.</p>

<a href="#why" id="why" style="color: inherit; text-decoration: none;">
  <h1>Why?</h1>
</a>
<p>In ES6, Map is a very useful key-value collection object.
Accessing values through specific keys is very efficient and easy to delete.
However, sometimes we need to change item order for use like an array or iterable.
ES6 map cannot swap or change its order before transforming into something(ex. array: <code>Array.from().forEach(..)</code>, iterator: <code>map.entries()</code>).
One way to solve this, transform the map to an array, change its order, then re-transform it into a map.
It seems really fair and simple approach, but then the real big problem comes: changing its order.
We cannot easily find where our item is in the array, so we must traverse all items to find where it is and it consumes time complexity O(n).
Well, if all items were sorted, we can reduce its time complexity to O(logn). However we cannot determine the original map was sorted, and
we don&#39;t want to sort transformed array for just doing swap its order. It&#39;s &quot;redundant&quot; and &quot;inefficient&quot;.
VectorMap resolves such, especially the swap case. VectorMap is concatenated map(pointer)-array(source) object. The map contains the source pointer(array index), and the array contains its value and key. We can access or delete value with time complexity O(1) via map-array. Though delete operation is actually swap with tail and pop so that causes cracking its original order, it has great performance O(1) and its really great to use with webGL instancing.</p>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h1>Usage</h1>
</a>
<pre><code class="language-ts"><span class="hl-0">interface</span><span class="hl-1"> </span><span class="hl-2">FooBar</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">foo</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">bar</span><span class="hl-1">: </span><span class="hl-2">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-4">vectorMap</span><span class="hl-1">: </span><span class="hl-2">VectorMap</span><span class="hl-1">&lt;</span><span class="hl-2">string</span><span class="hl-1">, </span><span class="hl-2">FooBar</span><span class="hl-1">&gt; = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-5">VectorMap</span><span class="hl-1">();</span><br/><br/><span class="hl-6">// set item.</span><br/><span class="hl-3">vectorMap</span><span class="hl-1">.</span><span class="hl-5">set</span><span class="hl-1">(</span><span class="hl-7">&#39;foo&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-3">foo:</span><span class="hl-1"> </span><span class="hl-7">&#39;foo&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">bar:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-3">vectorMap</span><span class="hl-1">.</span><span class="hl-5">set</span><span class="hl-1">(</span><span class="hl-7">&#39;bar&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-3">foo:</span><span class="hl-1"> </span><span class="hl-7">&#39;bar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">bar:</span><span class="hl-1"> </span><span class="hl-8">2</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">// get item.</span><br/><span class="hl-3">vectorMap</span><span class="hl-1">.</span><span class="hl-5">get</span><span class="hl-1">(</span><span class="hl-7">&#39;foo&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// swap inner order. It does not affect to each item.</span><br/><span class="hl-3">vectorMap</span><span class="hl-1">.</span><span class="hl-5">swapSource</span><span class="hl-1">(</span><span class="hl-7">&#39;foo&#39;</span><span class="hl-1">,</span><span class="hl-7">&#39;bar&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// vectorMap is iterable.</span><br/><span class="hl-9">for</span><span class="hl-1"> (</span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-4">v</span><span class="hl-1"> </span><span class="hl-0">of</span><span class="hl-1"> </span><span class="hl-3">vectorMap</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">v</span><span class="hl-1">.</span><span class="hl-3">key</span><span class="hl-1">, </span><span class="hl-3">v</span><span class="hl-1">.</span><span class="hl-3">value</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// you can iterate item via forEach, map, reduce too.</span><br/><span class="hl-3">vectorMap</span><span class="hl-1">.</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-3">el</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">el</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">// delete item. It swaps with tail element then pop. This will change its order.</span><br/><span class="hl-3">vectorMap</span><span class="hl-1">.</span><span class="hl-5">delete</span><span class="hl-1">(</span><span class="hl-7">&#39;foo&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// you can serve swap callback if deleting item is swapped with tail. Only called when swapped.</span><br/><span class="hl-3">vectorMap</span><span class="hl-1">.</span><span class="hl-5">delete</span><span class="hl-1">(</span><span class="hl-7">&#39;bar&#39;</span><span class="hl-1">, (</span><span class="hl-3">swapped</span><span class="hl-1">, </span><span class="hl-3">deleted</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">swapped</span><span class="hl-1">.</span><span class="hl-3">key</span><span class="hl-1">, </span><span class="hl-3">swapped</span><span class="hl-1">.</span><span class="hl-3">value</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code></pre>

<a href="#api-reference" id="api-reference" style="color: inherit; text-decoration: none;">
  <h2>API Reference</h2>
</a>
<p><a href="https://paosder.github.io/vector-map/index.html">https://paosder.github.io/vector-map/index.html</a></p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class tsd-has-type-parameter"><a href="classes/VectorMap.html" class="tsd-kind-icon">Vector<wbr/>Map</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#MapSource" class="tsd-kind-icon">Map<wbr/>Source</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>